Crafty.c("MoveTo",{_speed:2,_onmousedown:function(a){this._stopMoving();this._target={x:a.realX,y:a.realY};this.trigger("NewDirection",this._movement);this.bind("EnterFrame",this._enterFrame)},_stopMoving:function(){this._movement={x:0,y:0};this._target=undefined;this.unbind("EnterFrame",this._enterFrame)},_enterFrame:function(){if(this.disableControls||!this._target){return}if(Math.abs(this._target.x-this.x)<this._speed&&Math.abs(this._target.y-this.y)<this._speed){var e={x:this.x,y:this.y};this.x=this._target.x;this.y=this._target.y;this._stopMoving();this.trigger("Moved",e);this.trigger("NewDirection",this._movement);return}var b=this._target.x-this.x,a=this._target.y-this.y,d=this.x,c=this.y;this.x+=(b*this._speed)/(Math.sqrt(b*b+a*a));this.trigger("Moved",{x:d,y:this.y});this.y+=(a*this._speed)/(Math.sqrt(b*b+a*a));this.trigger("Moved",{x:this.x,y:c})},moveTo:function(a){this._speed=a;return this},init:function(){this.requires("Mouse");Crafty.addEvent(this,Crafty.stage.elem,"mousedown",this._onmousedown)}});